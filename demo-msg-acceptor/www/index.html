<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo Acceptor</title>
</head>
<body>
<header>Receiving accepted events...</header>
<div id="content" style="width: 500px; margin: 20px auto;"></div>

<script>
if ("WebSocket" in window) {
    alert("WebSocket is supported by your Browser!");

    let count = 0;
    let webSocket = new WebSocket("http://acceptor:7081/");

    webSocket.onopen = function (event) {
      receiveMessage(event.data);
    };

    webSocket.onmessage = function (event) {
      receiveMessage(event.data);
    }

    webSocket.onclose = function() {
      receiveMessage("Connection is closed...");
   };

    let receiveMessage(msg){
        let container = document.getElementById("content");
        var newElement = document.createElement("div");
        newElement.setAttribute('id', "msg".append(count++));
        newElement.innerHTML = messageTemplate(msg);
        container.appendChild(newElement);
    }

    let messageTemplate(msg){
        return `
        <p style="padding: 10px; margin: 5px;">
            <span>${msg}</span>
        </p>
        `;
    }
} else {
   // The browser doesn't support WebSocket
   alert("WebSocket NOT supported by your Browser!");
}
</script>
</body>
</html>